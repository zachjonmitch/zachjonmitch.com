(()=>{function g(){if(!g.instance){let s=new Set;g.instance={subscribe:o=>s.add(o),unsubscribe:o=>s.delete(o)},window.addEventListener("resize",o=>{s.forEach(r=>r(o))})}return g.instance}function w(){if(!w.instance){let s=new WeakMap,o=new Set;w.instance={register:(r,a,t,e)=>{s.has(r)||(s.set(r,{type:a,pause:t,resume:e}),o.add(r),r.hasAttribute("data-pause")&&t())},pauseAll:()=>{o.forEach(r=>{let a=s.get(r);a&&a.pause()})},resumeAll:()=>{o.forEach(r=>{let a=s.get(r);a&&a.resume()})},pauseType:(r=null)=>{o.forEach(a=>{let t=s.get(a);t&&(!r||t.type===r)&&t.pause()})},resumeType:(r=null)=>{o.forEach(a=>{let t=s.get(a);t&&(!r||t.type===r)&&t.resume()})},resumeElement:r=>{let a=s.get(r);a&&a.resume()}}}return w.instance}function A(){if(!A.instance){let s=new Set;A.instance={add:o=>s.add(o),clearAll:()=>{s.forEach(clearTimeout),s.clear()}}}return A.instance}document.addEventListener("DOMContentLoaded",()=>{L(),M(),z(),q(),I(),P(),Y(),F(),k()});function L(){let a=document.querySelector("body"),t=document.querySelector("[data-ui-canvas-bg]"),e=t.getContext("2d"),c=new Image;c.src="/dist/img/grit-white.png";let d=0,n=0,i,l=!1,u=0,m=0,p=-.5,f=0,v=performance.now(),b=g();function y(){let h=window.devicePixelRatio||1;t.width=window.innerWidth*h,t.height=window.innerHeight*h,t.style.width="100vw",t.style.height="100vh",e.scale(h,h),i=window.innerHeight*.3,e.imageSmoothingEnabled=!1}function T(h){if(!c.complete){requestAnimationFrame(T);return}let x=(h-v)/16.67;v=h,e.clearRect(0,0,t.width,t.height);for(let E=d-269;E<window.innerWidth+269;E+=269)for(let S=n-i;S<window.innerHeight+i;S+=i)e.drawImage(c,E,S,269,i);l||(d+=p*x,n+=f*x,p*=.95,f*=.95,Math.abs(p)<.5&&(p=-.5),Math.abs(f)<.01&&(f=0)),d<=-269&&(d+=269),d>=269&&(d-=269),n<=-i&&(n+=i),n>=i&&(n-=i),requestAnimationFrame(T)}t.addEventListener("mousedown",h=>{l=!0,u=h.clientX,m=h.clientY,p=0,f=0,a.classList.add("page-grabbed")}),t.addEventListener("mousemove",h=>{if(l){let x=h.clientX-u,E=h.clientY-m;d-=x,n-=E,p=-x,f=-E,u=h.clientX,m=h.clientY}}),t.addEventListener("mouseup",()=>{l=!1,a.classList.remove("page-grabbed")}),t.addEventListener("mouseleave",()=>{l=!1,a.classList.remove("page-grabbed")}),y(),c.onload=()=>requestAnimationFrame(T),b.subscribe(y)}function M(){let s=document.querySelectorAll("[data-parallax]"),o=window.scrollY,r=!1;function a(){let t=window.scrollY;if(t===o){r=!1,requestAnimationFrame(a);return}o=t,s.forEach(e=>{let c=parseFloat(e.dataset.parallaxSpeedX)||0,d=parseFloat(e.dataset.parallaxSpeedY)||0,n=e.hasAttribute("data-parallax-start-x"),i=e.hasAttribute("data-parallax-stop-x"),l=e.hasAttribute("data-parallax-start-y"),u=e.hasAttribute("data-parallax-stop-y"),m=n?parseFloat(e.dataset.parallaxStartX):0,p=i?parseFloat(e.dataset.parallaxStopX):1/0,f=l?parseFloat(e.dataset.parallaxStartY):0,v=u?parseFloat(e.dataset.parallaxStopY):1/0,b=m+c*t,y=f+d*t;n&&i&&(b=Math.min(Math.max(b,Math.min(m,p)),Math.max(m,p))),l&&u&&(y=Math.min(Math.max(y,Math.min(f,v)),Math.max(f,v))),e.style.transform=`translate3d(${b}px, ${y}px, 0)`}),r=!1,requestAnimationFrame(a)}requestAnimationFrame(a)}function z(){let s=document.querySelectorAll("[data-ui-game-controls-key]"),o=a=>{let t=a.key.toUpperCase();t===" "&&a.preventDefault(),s.forEach(e=>{let c=e.dataset.uiGameControlsKey.toUpperCase();(c===t||c==="SPACE"&&t===" ")&&e.classList.add("game-controls__key--active")})},r=a=>{let t=a.key.toUpperCase();s.forEach(e=>{let c=e.dataset.uiGameControlsKey.toUpperCase();(c===t||c==="SPACE"&&t===" ")&&e.classList.remove("game-controls__key--active")})};document.addEventListener("keydown",o),document.addEventListener("keyup",r)}function q(){let s=document.querySelector("body"),o=document.querySelector("[data-ui-navbar-toggle]"),r=document.querySelector("[data-ui-navbar-collapse]"),a=document.querySelector("[data-ui-navbar-close-button]"),t=document.querySelectorAll("[data-ui-navbar-link]"),e=w();g().subscribe(C),o.addEventListener("click",d),a.addEventListener("click",n),t.forEach(i=>{i.addEventListener("click",C)});function d(){s.classList.add("mobile-menu-open"),r.classList.add("zm-navbar__collapse--active"),e.resumeType("text-reveal")}function n(){C()}}function C(){let s=document.querySelector("body"),o=document.querySelector("[data-ui-navbar-collapse]");s.classList.remove("mobile-menu-open"),o.classList.remove("zm-navbar__collapse--active")}function I(){document.querySelectorAll("a[href^='#']").forEach(r=>{r.addEventListener("click",o)});function o(r){r.preventDefault();let a=r.currentTarget.getAttribute("href").substring(1),t=document.getElementById(a);if(!t)return;let e=40,c=t.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:c-e,behavior:"smooth"})}}function k(){let s=document.querySelectorAll("[data-ui-work-box-track]"),o=window.matchMedia("(max-width: 991px)");function r(){s.forEach(a=>{let t=a.dataset.trackSpeed?parseFloat(a.dataset.trackSpeed):100,e=0,c=performance.now(),d=null,n=!1;function i(f){if(!n)return;let v=f-c;c=f,e-=t/7e3*(v/16.67),e<=-50&&(e=0),a.style.transform=`translate3d(0, ${e}%, 0)`,d=requestAnimationFrame(i)}function l(){n||(n=!0,c=performance.now(),requestAnimationFrame(i))}function u(){n=!1,d&&(cancelAnimationFrame(d),d=null)}function m(){o.matches?l():u()}m(),o.addEventListener("change",m);let p=a.closest(".work-box");p.addEventListener("mouseenter",()=>{o.matches||(s.forEach(f=>{f!==a&&(f.dataset.animating="false",u.call(f))}),a.dataset.animating="true",l())}),p.addEventListener("mouseleave",()=>{o.matches||u()})})}r()}function P(){let s=window.matchMedia("(max-width: 575px)"),o=w();function r(n,i,l,u,m){return n.animate([{transform:`translateY(${u}%)`},{transform:`translateY(${m}%)`}],{duration:l,easing:"cubic-bezier(.68,-.55,.265,1.55)",fill:"forwards",delay:i}).finished}function a(n){let i=n.getAttribute("data-zm-text-reveal-mode")==="mobile";if(!s.matches&&i)return;let l="";if(n.hasAttribute("data-zm-text-reveal-mobile")&&s.matches?l=n.getAttribute("data-zm-text-reveal-mobile"):l=n.getAttribute("data-zm-text-reveal"),!l){n.innerText="";return}let u=l.split("");n.innerText="",u.forEach(m=>{if(m===" ")n.insertAdjacentHTML("beforeend",'<span class="zm-reveal-char__space">&nbsp;</span>');else{let p=`<span class='zm-reveal-char__wrap z-2' data-ui-reveal-char-wrap aria-hidden='true'>
                        <span class='zm-reveal-char zm-reveal-char--primary' data-ui-reveal-char>${m}</span>
                        <span class='zm-reveal-char zm-reveal-char--alt' data-ui-reveal-char-alt>${m}</span>
                      </span>`;n.insertAdjacentHTML("beforeend",p)}})}function t(n){a(n);let i=n.querySelectorAll("[data-ui-reveal-char]");if(i.length===0)return;let l=[],u=!1;function m(){u||(l=[],setTimeout(()=>{i.forEach((v,b)=>{l.push(r(v,b*70,600,100,0))}),l.length>0&&Promise.all(l).then(()=>{o.resumeType("typewriter"),n.hasAttribute("data-zm-text-reveal-hover")&&c(n)})},500))}function p(){u=!0,l.forEach(v=>v.cancel())}function f(){u&&(u=!1,m())}n.hasAttribute("data-pause")&&o.register(n,"text-reveal",p,f),m()}function e(n){let i=n.currentTarget,l=i.querySelector("[data-ui-reveal-char]"),u=i.querySelector("[data-ui-reveal-char-alt]");r(l,0,600,0,-100),r(u,0,600,100,0)}function c(n){n.querySelectorAll("[data-ui-reveal-char-wrap]").forEach(l=>{l.addEventListener("mouseenter",e)})}function d(){document.querySelectorAll("[data-zm-text-reveal]").forEach(t)}d(),s.addEventListener("change",d)}function Y(){let s=window.matchMedia("(max-width: 575px)"),o=A(),r=w();function a(){o.clearAll(),document.querySelectorAll("[data-zm-text-typewriter]").forEach(e=>{let c=R(e.getAttribute("data-zm-text-typewriter")||""),d=0,n=null,i=!1;e.classList.add("zm-typewriter"),e.innerHTML="&nbsp;";function l(){i||(d===0&&(e.classList.add("zm-typewriter--visible"),e.innerHTML=c[0]||"",d=1),d<c.length?(n=setTimeout(()=>{i||(e.textContent+=c[d],d++,l())},60),o.add(n)):e.classList.add("zm-typewriter--blink"))}function u(){i=!0,n!==null&&clearTimeout(n)}function m(){if(i){if(i=!1,d>=c.length){e.classList.add("zm-typewriter--blink");return}l()}}r.register(e,"typewriter",u,m),l()})}a(),s.addEventListener("change",a)}function F(){let s=document.querySelectorAll("[data-zm-text-scramble]"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZ";s.forEach(r=>{let a=Array.from(r.childNodes).find(e=>e.nodeType===Node.TEXT_NODE);if(!a)return;let t=a.textContent.trim();r.addEventListener("mouseenter",()=>{let e=0,c=setInterval(()=>{a.textContent=t.split("").map((d,n)=>n<e?t[n]:o[Math.floor(Math.random()*26)]).join(""),e>=t.length&&clearInterval(c),e+=1/3},30)})})}function R(s){var o=document.createElement("textarea");return o.innerHTML=s,o.value}})();
