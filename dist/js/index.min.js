function initAsteroids(){}function pauseController(){if(!pauseController.instance){let n=new WeakMap,i=new Set;pauseController.instance={register:(e,t,a,r)=>{n.has(e)||(n.set(e,{type:t,pause:a,resume:r}),i.add(e),e.hasAttribute("data-pause")&&a())},pauseAll:()=>{i.forEach(e=>{e=n.get(e);e&&e.pause()})},resumeAll:()=>{i.forEach(e=>{e=n.get(e);e&&e.resume()})},pauseType:(t=null)=>{i.forEach(e=>{e=n.get(e);!e||t&&e.type!==t||e.pause()})},resumeType:(t=null)=>{i.forEach(e=>{e=n.get(e);!e||t&&e.type!==t||e.resume()})},resumeElement:e=>{e=n.get(e);e&&e.resume()}}}return pauseController.instance}function windowScrollController(){if(!windowScrollController.instance){let a=new Set;windowScrollController.instance={subscribe:e=>{a.add(e)},unsubscribe:e=>{a.delete(e)}},window.addEventListener("scroll",t=>{a.forEach(e=>{e(t)})})}return windowScrollController.instance}function windowResizeController(){if(!windowResizeController.instance){let a=new Set;windowResizeController.instance={subscribe:e=>a.add(e),unsubscribe:e=>a.delete(e)},window.addEventListener("resize",t=>{a.forEach(e=>e(t))})}return windowResizeController.instance}function timeoutController(){if(!timeoutController.instance){let t=new Set;timeoutController.instance={add:e=>t.add(e),clearAll:()=>{t.forEach(clearTimeout),t.clear()}}}return timeoutController.instance}function observeElements(e,t,a={root:null,threshold:0}){e=document.querySelectorAll(e);let r=new IntersectionObserver(e=>{requestAnimationFrame(()=>{e.forEach(e=>{e.isIntersecting&&t(e,r)})})},a);return e.forEach(e=>r.observe(e)),r}function decodeHTML(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function lerp(e,t,a){return e+(t-e)*a}function initParallax(){let t=document.querySelectorAll("[data-parallax]"),a=window.scrollY,r=!1;requestAnimationFrame(function e(){let h=window.scrollY;r=(h!==a&&(a=h,t.forEach(e=>{var t=parseFloat(e.dataset.parallaxSpeedX)||0,a=parseFloat(e.dataset.parallaxSpeedY)||0,r=e.hasAttribute("data-parallax-start-x"),n=e.hasAttribute("data-parallax-stop-x"),i=e.hasAttribute("data-parallax-start-y"),l=e.hasAttribute("data-parallax-stop-y"),o=r?parseFloat(e.dataset.parallaxStartX):0,s=n?parseFloat(e.dataset.parallaxStopX):1/0,c=i?parseFloat(e.dataset.parallaxStartY):0,d=l?parseFloat(e.dataset.parallaxStopY):1/0;let u=o+t*h,m=c+a*h;r&&n&&(u=Math.min(Math.max(u,Math.min(o,s)),Math.max(o,s))),i&&l&&(m=Math.min(Math.max(m,Math.min(c,d)),Math.max(c,d))),e.style.transform=`translate3d(${u}px, ${m}px, 0)`})),!1),requestAnimationFrame(e)})}function initSiteBackground(){let a=269,t=document.querySelector("body"),r=document.querySelector("[data-ui-canvas-bg]"),n=r.getContext("2d"),i=new Image,l=(i.src="/dist/img/grit-white.png",0),o=0,s,c=!1,d=0,u=0,m=-.5,h=0;function e(){var e=window.devicePixelRatio||1;r.width=window.innerWidth*e,r.height=window.innerHeight*e,r.style.width="100vw",r.style.height="100vh",n.scale(e,e),s=.3*window.innerHeight,n.imageSmoothingEnabled=!1}r.addEventListener("mousedown",e=>{c=!0,d=e.clientX,u=e.clientY,m=0,h=0,t.classList.add("page-grabbed")}),r.addEventListener("mousemove",e=>{var t,a;c&&(t=e.clientX-d,a=e.clientY-u,l-=t,o-=a,m=-t,h=-a,d=e.clientX,u=e.clientY)}),r.addEventListener("mouseup",()=>{c=!1,t.classList.remove("page-grabbed")}),r.addEventListener("mouseleave",()=>{c=!1,t.classList.remove("page-grabbed")}),e(),i.onload=function e(){if(i.complete){n.clearRect(0,0,r.width,r.height);for(let t=l-a;t<window.innerWidth+a;t+=a)for(let e=o-s;e<window.innerHeight+s;e+=s)n.drawImage(i,t,e,a,s);c||(l+=m,o+=h,m*=.95,h*=.95,Math.abs(m)<.5&&(m=-.5),Math.abs(h)<.01&&(h=0)),l<=-a&&(l+=a),l>=a&&(l-=a),o<=-s&&(o+=s),o>=s&&(o-=s)}requestAnimationFrame(e)},window.addEventListener("resize",e)}function initMobileMenu(){let e=document.querySelector("body");var t=document.querySelector("[data-ui-navbar-toggle]");let a=document.querySelector("[data-ui-navbar-collapse]");var r=document.querySelector("[data-ui-navbar-close-button]"),n=document.querySelectorAll("[data-ui-navbar-link]");let i=pauseController();windowResizeController().subscribe(resetMobileMenu),t.addEventListener("click",function(){e.classList.add("mobile-menu-open"),a.classList.add("zm-navbar__collapse--active"),i.resumeType("text-reveal")}),r.addEventListener("click",function(){resetMobileMenu()}),n.forEach(e=>{e.addEventListener("click",resetMobileMenu)})}function resetMobileMenu(){var e=document.querySelector("body"),t=document.querySelector("[data-ui-navbar-collapse]");e.classList.remove("mobile-menu-open"),t.classList.remove("zm-navbar__collapse--active")}function initAnchorScroll(){function t(e){e.preventDefault();var e=e.currentTarget.getAttribute("href").substring(1),e=document.getElementById(e);e&&(e=e.getBoundingClientRect().top+window.scrollY,window.scrollTo({top:e-40,behavior:"smooth"}))}document.querySelectorAll("a[href^='#']").forEach(e=>{e.addEventListener("click",t)})}function initWorkCarousels(){let c=document.querySelectorAll("[data-ui-work-box-track]"),d=window.matchMedia("(max-width: 991px)");c.forEach(t=>{let e=t.dataset.trackSpeed?parseFloat(t.dataset.trackSpeed):100,a=0,r=null,n=!1;function i(){n&&((a-=e/7e3)<=-50&&(a=0),t.style.transform=`translate3d(0, ${a}%, 0)`,r=requestAnimationFrame(i))}function l(){n||(n=!0,requestAnimationFrame(i))}function o(){n=!1,r&&(cancelAnimationFrame(r),r=null)}function s(){(d.matches?l:o)()}s(),d.addEventListener("change",s),t.closest(".work-box").addEventListener("mouseenter",()=>{d.matches||(c.forEach(e=>{e!==t&&(e.dataset.animating="false",o.call(e))}),t.dataset.animating="true",l())}),t.closest(".work-box").addEventListener("mouseleave",()=>{d.matches||o()})})}function initTextReveals(){document.querySelectorAll("[data-zm-text-reveal]");let l=window.matchMedia("(max-width: 575px)"),o=pauseController();function s(e,t,a,r,n){return e.animate([{transform:`translateY(${r}%)`},{transform:`translateY(${n}%)`}],{duration:a,easing:"cubic-bezier(.68,-.55,.265,1.55)",fill:"forwards",delay:t}).finished}function e(t){var a=t,r="mobile"===a.getAttribute("data-zm-text-reveal-mode");if(l.matches||!r){let e="";(e=a.hasAttribute("data-zm-text-reveal-mobile")&&l.matches?a.getAttribute("data-zm-text-reveal-mobile"):a.getAttribute("data-zm-text-reveal"))?(r=e.split(""),a.innerText="",r.forEach(e=>{" "===e?a.insertAdjacentHTML("beforeend",'<span class="zm-reveal-char__space">&nbsp;</span>'):a.insertAdjacentHTML("beforeend",`<span class='zm-reveal-char__wrap z-2' data-ui-reveal-char-wrap aria-hidden='true'>
                        <span class='zm-reveal-char zm-reveal-char--primary' data-ui-reveal-char>${e}</span>
                        <span class='zm-reveal-char zm-reveal-char--alt' data-ui-reveal-char-alt>${e}</span>
                      </span>`)})):a.innerText=""}let n=t.querySelectorAll("[data-ui-reveal-char]");if(0!==n.length){let a=[],e=!1;function i(){e||(a=[],n.forEach((e,t)=>{a.push(s(e,70*t,600,100,0))}),0<a.length&&setTimeout(()=>{Promise.all(a).then(()=>{o.resumeType("typewriter"),t.hasAttribute("data-zm-text-reveal-hover")&&t.querySelectorAll("[data-ui-reveal-char-wrap]").forEach(e=>{e.addEventListener("mouseenter",c)})})},400))}t.hasAttribute("data-pause")&&o.register(t,"text-reveal",function(){e=!0,a.forEach(e=>e.cancel())},function(){e&&(e=!1,i())}),i()}}function c(e){var e=e.currentTarget,t=e.querySelector("[data-ui-reveal-char]"),e=e.querySelector("[data-ui-reveal-char-alt]");s(t,0,600,0,-100),s(e,0,600,100,0)}function t(){document.querySelectorAll("[data-zm-text-reveal]").forEach(e)}t(),l.addEventListener("change",t)}function initTextTypewriters(){var e=window.matchMedia("(max-width: 575px)");let l=timeoutController(),o=pauseController();function t(){l.clearAll(),document.querySelectorAll("[data-zm-text-typewriter]").forEach(e=>{let t=decodeHTML(e.getAttribute("data-zm-text-typewriter")||""),a=0,r=null,n=!1;function i(){n||(0===a&&(e.classList.add("zm-typewriter--visible"),e.innerHTML=t[0]||"",a=1),a<t.length?(r=setTimeout(()=>{n||(e.textContent+=t[a],a++,i())},60),l.add(r)):e.classList.add("zm-typewriter--blink"))}e.classList.add("zm-typewriter"),e.innerHTML="&nbsp;",o.register(e,"typewriter",function(){n=!0,null!==r&&clearTimeout(r)},function(){n&&(n=!1,a>=t.length?e.classList.add("zm-typewriter--blink"):i())}),i()})}t(),e.addEventListener("change",t)}function initTextScrambles(){var e=document.querySelectorAll("[data-zm-text-scramble]");e.forEach(e=>{let t=Array.from(e.childNodes).find(e=>e.nodeType===Node.TEXT_NODE);if(t){let r=t.textContent.trim();e.addEventListener("mouseenter",()=>{let a=0,e=setInterval(()=>{t.textContent=r.split("").map((e,t)=>t<a?r[t]:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(26*Math.random())]).join(""),a>=r.length&&clearInterval(e),a+=1/3},30)})}})}document.addEventListener("DOMContentLoaded",()=>{initSiteBackground(),initParallax(),initMobileMenu(),initAnchorScroll(),initTextReveals(),initTextTypewriters(),initTextScrambles(),initWorkCarousels()});export{initAsteroids};