(()=>{function _(){if(!_.instance){let i=new Set;_.instance={subscribe:s=>i.add(s),unsubscribe:s=>i.delete(s)},window.addEventListener("resize",s=>{i.forEach(c=>c(s))})}return _.instance}function j(){let i=window.devicePixelRatio||1,s=60,c=.7,o=.6,l=.1,r=10,f=500,d=10,n=100,u=50,h=10,m=.4,p=.3,x=.1,b=3,w=35,C=5,k=360,N=!1,M=!1,S=document.querySelector("[data-ui-canvas-game]"),a=S.getContext("2d"),q=_(),I=window.innerWidth/i,A=window.innerHeight/i,e=O(),y=[];X(),document.addEventListener("keydown",ee),document.addEventListener("keyup",te);function X(){let v=n;y=[];for(let E=0;E<d;E++){let g,T,R=!1;for(;!R;)g=Math.random()*(I-n*2)+n,T=Math.random()*(A-n*2)+n,F(e.x,e.y,g,T)>v&&(R=!0);y.push(H(g,T,Math.ceil(n/2)))}}function V(){e=O(),X()}function W(v){let E=y[v].x,g=y[v].y,T=y[v].r;T==Math.ceil(n/2)?(y.push(H(E,g,Math.ceil(n/4))),y.push(H(E,g,Math.ceil(n/4)))):T==Math.ceil(n/4)&&(y.push(H(E,g,Math.ceil(n/8))),y.push(H(E,g,Math.ceil(n/8)))),y.splice(v,1)}function H(v,E,g){let T={x:v,y:E,xv:Math.random()*u/s*(Math.random()<.5?1:-1),yv:Math.random()*u/s*(Math.random()<.5?1:-1),r:g,a:Math.random()*Math.PI/2,vert:Math.floor(Math.random()*(h+1)+h/2),offs:[]};for(let R=0;R<T.vert;R++)T.offs.push(Math.random()*m*2+1-m);return T}function O(){return{x:15+w/2,y:A-15-w/2,r:w/2,a:90/180*Math.PI,blinkNum:Math.ceil(b/x),blinkTime:Math.ceil(x*s),canShoot:!0,explodeTime:0,lasers:[],rot:0,thrusting:!1,thrust:{x:0,y:0}}}function Z(){e.canShoot&&e.lasers.length<r&&e.lasers.push({x:e.x+4/3*e.r*Math.cos(e.a),y:e.y-4/3*e.r*Math.sin(e.a),xv:f*Math.cos(e.a)/s,yv:-f*Math.sin(e.a)/s,dist:0,explodeTime:0}),e.canShoot=!1}function F(v,E,g,T){return Math.sqrt(Math.pow(g-v,2)+Math.pow(T-E,2))}function J(){e.explodeTime=Math.ceil(p*s)}let L={left:!1,right:!1,up:!1};function ee(v){switch(v.key.toLowerCase()){case"a":L.left=!0,e.rot=k/180*Math.PI/s;break;case"w":L.up=!0,e.thrusting=!0;break;case"d":L.right=!0,e.rot=-k/180*Math.PI/s;break;case" ":case"space":Z();break}}function te(v){switch(v.key.toLowerCase()){case"a":L.left=!1,L.right?e.rot=-k/180*Math.PI/s:e.rot=0;break;case"w":L.up=!1,e.thrusting=!1;break;case"d":L.right=!1,L.left?e.rot=k/180*Math.PI/s:e.rot=0;break;case" ":case"space":e.canShoot=!0;break}}function U(){let v=e.blinkNum%2==0,E=e.explodeTime>0;a.clearRect(0,0,S.width,S.height),y.length===0&&V(),e.thrusting?(e.thrust.x+=C*Math.cos(e.a)/s,e.thrust.y-=C*Math.sin(e.a)/s):(e.thrust.x-=c*e.thrust.x/s,e.thrust.y-=c*e.thrust.y/s),E?(a.fillStyle="darkred",a.beginPath(),a.arc(e.x+.15*e.r*Math.cos(e.a),e.y-.15*e.r*Math.sin(e.a),e.r*1.7,0,Math.PI*2,!1),a.fill(),a.fillStyle="red",a.beginPath(),a.arc(e.x+.15*e.r*Math.cos(e.a),e.y-.15*e.r*Math.sin(e.a),e.r*1.4,0,Math.PI*2,!1),a.fill(),a.fillStyle="orange",a.beginPath(),a.arc(e.x+.15*e.r*Math.cos(e.a),e.y-.15*e.r*Math.sin(e.a),e.r*1.1,0,Math.PI*2,!1),a.fill(),a.fillStyle="yellow",a.beginPath(),a.arc(e.x+.15*e.r*Math.cos(e.a),e.y-.15*e.r*Math.sin(e.a),e.r*.8,0,Math.PI*2,!1),a.fill(),a.fillStyle="white",a.beginPath(),a.arc(e.x+.15*e.r*Math.cos(e.a),e.y-.15*e.r*Math.sin(e.a),e.r*.5,0,Math.PI*2,!1),a.fill()):(v&&(a.strokeStyle="#05F802",a.lineWidth=w/20,a.beginPath(),a.moveTo(e.x+4/3*e.r*Math.cos(e.a),e.y-4/3*e.r*Math.sin(e.a)),a.lineTo(e.x-e.r*(2/3*Math.cos(e.a)+.8*Math.sin(e.a)),e.y+e.r*(2/3*Math.sin(e.a)-.8*Math.cos(e.a))),a.lineTo(e.x-e.r*(1/3*Math.cos(e.a)),e.y+e.r*(1/3*Math.sin(e.a))),a.lineTo(e.x-e.r*(2/3*Math.cos(e.a)-.8*Math.sin(e.a)),e.y+e.r*(2/3*Math.sin(e.a)+.8*Math.cos(e.a))),a.closePath(),a.stroke()),e.blinkNum>0&&(e.blinkTime--,e.blinkTime==0&&(e.blinkTime=Math.ceil(x*s),e.blinkNum--))),N&&(a.strokeStyle="red",a.beginPath(),a.arc(e.x+.15*e.r*Math.cos(e.a),e.y-.15*e.r*Math.sin(e.a),e.r,0,Math.PI*2,!1),a.stroke()),y.forEach(t=>{a.strokeStyle="rgba(255, 255, 255, 0.2)",a.lineWidth=w/20,a.beginPath(),a.moveTo(t.x+t.r*t.offs[0]*Math.cos(t.a),t.y+t.r*t.offs[0]*Math.sin(t.a));for(let P=1;P<t.vert;P++)a.lineTo(t.x+t.r*t.offs[P]*Math.cos(t.a+P*Math.PI*2/t.vert),t.y+t.r*t.offs[P]*Math.sin(t.a+P*Math.PI*2/t.vert));a.closePath(),a.stroke(),N&&(a.strokeStyle="red",a.beginPath(),a.arc(t.x,t.y,t.r,0,Math.PI*2,!1),a.stroke())}),M&&(a.fillStyle="red",a.fillRect(e.x-1+.15*e.r*Math.cos(e.a),e.y-1-.15*e.r*Math.sin(e.a),2,2));for(let t=0;t<e.lasers.length;t++)e.lasers[t].explodeTime==0?(a.fillStyle="lime",a.beginPath(),a.arc(e.lasers[t].x,e.lasers[t].y,w/15,0,Math.PI*2,!1),a.fill()):(a.fillStyle="orangered",a.beginPath(),a.arc(e.lasers[t].x,e.lasers[t].y,e.r*.75,0,Math.PI*2,!1),a.fill(),a.fillStyle="salmon",a.beginPath(),a.arc(e.lasers[t].x,e.lasers[t].y,e.r*.5,0,Math.PI*2,!1),a.fill(),a.fillStyle="pink",a.beginPath(),a.arc(e.lasers[t].x,e.lasers[t].y,e.r*.25,0,Math.PI*2,!1),a.fill());let g,T,R,G,$;for(let t=y.length-1;t>=0;t--){g=y[t].x,T=y[t].y,R=y[t].r;for(let P=e.lasers.length-1;P>=0;P--)if(G=e.lasers[P].x,$=e.lasers[P].y,e.lasers[P].explodeTime==0&&F(g,T,G,$)<R){W(t),e.lasers[P].explodeTime=Math.ceil(l*s);break}}if(E)e.explodeTime--,e.explodeTime==0&&(e=O(),e.y=A-15-e.r);else{if(e.blinkNum==0){for(let t=y.length-1;t>=0;t--)if(F(e.x,e.y,y[t].x,y[t].y)<e.r+y[t].r){J(),W(t);break}}e.a+=e.rot,e.x+=e.thrust.x,e.y+=e.thrust.y}e.x<0-e.r?e.x=I+e.r:e.x>I+e.r&&(e.x=0-e.r),e.y<0-e.r?e.y=A+e.r:e.y>A+e.r&&(e.y=0-e.r);for(let t=e.lasers.length-1;t>=0;t--){if(e.lasers[t].dist>o*I){e.lasers.splice(t,1);continue}if(e.lasers[t].explodeTime>0){if(e.lasers[t].explodeTime--,e.lasers[t].explodeTime==0){e.lasers.splice(t,1);continue}}else e.lasers[t].x+=e.lasers[t].xv,e.lasers[t].y+=e.lasers[t].yv,e.lasers[t].dist+=Math.sqrt(Math.pow(e.lasers[t].xv,2)+Math.pow(e.lasers[t].yv,2));e.lasers[t].x<0?e.lasers[t].x=I:e.lasers[t].x>I&&(e.lasers[t].x=0),e.lasers[t].y<0?e.lasers[t].y=A:e.lasers[t].y>A&&(e.lasers[t].y=0)}y.forEach(t=>{t.x+=t.xv,t.y+=t.yv,t.x<-t.r?t.x=I+t.r:t.x>I+t.r&&(t.x=-t.r),t.y<-t.r?t.y=A+t.r:t.y>A+t.r&&(t.y=-t.r)}),requestAnimationFrame(U)}let B=!0;function K(){a.setTransform(1,0,0,1,0,0);let v=I||window.innerWidth/i,E=A||window.innerHeight/i;S.width=window.innerWidth*i,S.height=window.innerHeight*i,S.style.width="100vw",S.style.height="100vh",a.scale(i,i),a.imageSmoothingEnabled=!1,I=S.width/i,A=S.height/i,B?(e.x=15+e.r,e.y=A-15-e.r,B=!1):(e.x*=I/v,e.y*=A/E),y.forEach(g=>{g.x*=I/v,g.y*=A/E})}K(),U(),q.subscribe(K)}function D(){if(!D.instance){let i=new WeakMap,s=new Set;D.instance={register:(c,o,l,r)=>{i.has(c)||(i.set(c,{type:o,pause:l,resume:r}),s.add(c),c.hasAttribute("data-pause")&&l())},pauseAll:()=>{s.forEach(c=>{let o=i.get(c);o&&o.pause()})},resumeAll:()=>{s.forEach(c=>{let o=i.get(c);o&&o.resume()})},pauseType:(c=null)=>{s.forEach(o=>{let l=i.get(o);l&&(!c||l.type===c)&&l.pause()})},resumeType:(c=null)=>{s.forEach(o=>{let l=i.get(o);l&&(!c||l.type===c)&&l.resume()})},resumeElement:c=>{let o=i.get(c);o&&o.resume()}}}return D.instance}function z(){if(!z.instance){let i=new Set;z.instance={add:s=>i.add(s),clearAll:()=>{i.forEach(clearTimeout),i.clear()}}}return z.instance}document.addEventListener("DOMContentLoaded",()=>{ae(),Q(),j(),ne(),se(),re(),le(),oe(),ce(),ie()});function ae(){let o=document.querySelector("body"),l=document.querySelector("[data-ui-canvas-bg]"),r=l.getContext("2d"),f=new Image;f.src="/dist/img/grit-white.png";let d=0,n=0,u,h=!1,m=0,p=0,x=-.5,b=0,w=performance.now(),C=_();function k(){let M=window.devicePixelRatio||1;l.width=window.innerWidth*M,l.height=window.innerHeight*M,l.style.width="100vw",l.style.height="100vh",r.scale(M,M),u=window.innerHeight*.3,r.imageSmoothingEnabled=!1}function N(M){if(!f.complete){requestAnimationFrame(N);return}let S=(M-w)/16.67;w=M,r.clearRect(0,0,l.width,l.height);for(let a=d-269;a<window.innerWidth+269;a+=269)for(let q=n-u;q<window.innerHeight+u;q+=u)r.drawImage(f,a,q,269,u);h||(d+=x*S,n+=b*S,x*=.95,b*=.95,Math.abs(x)<.5&&(x=-.5),Math.abs(b)<.01&&(b=0)),d<=-269&&(d+=269),d>=269&&(d-=269),n<=-u&&(n+=u),n>=u&&(n-=u),requestAnimationFrame(N)}l.addEventListener("mousedown",M=>{h=!0,m=M.clientX,p=M.clientY,x=0,b=0,o.classList.add("page-grabbed")}),l.addEventListener("mousemove",M=>{if(h){let S=M.clientX-m,a=M.clientY-p;d-=S,n-=a,x=-S,b=-a,m=M.clientX,p=M.clientY}}),l.addEventListener("mouseup",()=>{h=!1,o.classList.remove("page-grabbed")}),l.addEventListener("mouseleave",()=>{h=!1,o.classList.remove("page-grabbed")}),k(),f.onload=()=>requestAnimationFrame(N),C.subscribe(k)}function Q(){let i=document.querySelectorAll("[data-parallax]"),s=window.scrollY,c=!1;function o(){let l=window.scrollY;if(l===s){c=!1,requestAnimationFrame(o);return}s=l,i.forEach(r=>{let f=parseFloat(r.dataset.parallaxSpeedX)||0,d=parseFloat(r.dataset.parallaxSpeedY)||0,n=r.hasAttribute("data-parallax-start-x"),u=r.hasAttribute("data-parallax-stop-x"),h=r.hasAttribute("data-parallax-start-y"),m=r.hasAttribute("data-parallax-stop-y"),p=n?parseFloat(r.dataset.parallaxStartX):0,x=u?parseFloat(r.dataset.parallaxStopX):1/0,b=h?parseFloat(r.dataset.parallaxStartY):0,w=m?parseFloat(r.dataset.parallaxStopY):1/0,C=p+f*l,k=b+d*l;n&&u&&(C=Math.min(Math.max(C,Math.min(p,x)),Math.max(p,x))),h&&m&&(k=Math.min(Math.max(k,Math.min(b,w)),Math.max(b,w))),r.style.transform=`translate3d(${C}px, ${k}px, 0)`}),c=!1,requestAnimationFrame(o)}requestAnimationFrame(o)}function ne(){let i=document.querySelectorAll("[data-ui-game-controls-key]"),s=o=>{let l=o.key.toUpperCase();l===" "&&o.preventDefault(),i.forEach(r=>{let f=r.dataset.uiGameControlsKey.toUpperCase();(f===l||f==="SPACE"&&l===" ")&&r.classList.add("game-controls__key--active")})},c=o=>{let l=o.key.toUpperCase();i.forEach(r=>{let f=r.dataset.uiGameControlsKey.toUpperCase();(f===l||f==="SPACE"&&l===" ")&&r.classList.remove("game-controls__key--active")})};document.addEventListener("keydown",s),document.addEventListener("keyup",c)}function se(){let i=document.querySelector("body"),s=document.querySelector("[data-ui-navbar-toggle]"),c=document.querySelector("[data-ui-navbar-collapse]"),o=document.querySelector("[data-ui-navbar-close-button]"),l=document.querySelectorAll("[data-ui-navbar-link]"),r=D();_().subscribe(Y),s.addEventListener("click",d),o.addEventListener("click",n),l.forEach(u=>{u.addEventListener("click",Y)});function d(){i.classList.add("mobile-menu-open"),c.classList.add("zm-navbar__collapse--active"),r.resumeType("text-reveal")}function n(){Y()}}function Y(){let i=document.querySelector("body"),s=document.querySelector("[data-ui-navbar-collapse]");i.classList.remove("mobile-menu-open"),s.classList.remove("zm-navbar__collapse--active")}function re(){document.querySelectorAll("a[href^='#']").forEach(c=>{c.addEventListener("click",s)});function s(c){c.preventDefault();let o=c.currentTarget.getAttribute("href").substring(1),l=document.getElementById(o);if(!l)return;let r=40,f=l.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:f-r,behavior:"smooth"})}}function ie(){let i=document.querySelectorAll("[data-ui-work-box-track]"),s=window.matchMedia("(max-width: 991px)");function c(){i.forEach(o=>{let l=o.dataset.trackSpeed?parseFloat(o.dataset.trackSpeed):100,r=0,f=performance.now(),d=null,n=!1;function u(b){if(!n)return;let w=b-f;f=b,r-=l/7e3*(w/16.67),r<=-50&&(r=0),o.style.transform=`translate3d(0, ${r}%, 0)`,d=requestAnimationFrame(u)}function h(){n||(n=!0,f=performance.now(),requestAnimationFrame(u))}function m(){n=!1,d&&(cancelAnimationFrame(d),d=null)}function p(){s.matches?h():m()}p(),s.addEventListener("change",p);let x=o.closest(".work-box");x.addEventListener("mouseenter",()=>{s.matches||(i.forEach(b=>{b!==o&&(b.dataset.animating="false",m.call(b))}),o.dataset.animating="true",h())}),x.addEventListener("mouseleave",()=>{s.matches||m()})})}c()}function le(){let i=window.matchMedia("(max-width: 575px)"),s=D();function c(n,u,h,m,p){return n.animate([{transform:`translateY(${m}%)`},{transform:`translateY(${p}%)`}],{duration:h,easing:"cubic-bezier(.68,-.55,.265,1.55)",fill:"forwards",delay:u}).finished}function o(n){let u=n.getAttribute("data-zm-text-reveal-mode")==="mobile";if(!i.matches&&u)return;let h="";if(n.hasAttribute("data-zm-text-reveal-mobile")&&i.matches?h=n.getAttribute("data-zm-text-reveal-mobile"):h=n.getAttribute("data-zm-text-reveal"),!h){n.innerText="";return}let m=h.split("");n.innerText="",m.forEach(p=>{if(p===" ")n.insertAdjacentHTML("beforeend",'<span class="zm-reveal-char__space">&nbsp;</span>');else{let x=`<span class='zm-reveal-char__wrap' data-ui-reveal-char-wrap data-parallax data-parallax-speed-y=".13" aria-hidden='true'>
                        <span class='zm-reveal-char zm-reveal-char--primary' data-ui-reveal-char>${p}</span>
                        <span class='zm-reveal-char zm-reveal-char--alt' data-ui-reveal-char-alt>${p}</span>
                      </span>`;n.insertAdjacentHTML("beforeend",x)}}),Q()}function l(n){o(n);let u=n.querySelectorAll("[data-ui-reveal-char]");if(u.length===0)return;let h=[],m=!1;function p(){m||(h=[],setTimeout(()=>{u.forEach((w,C)=>{h.push(c(w,C*70,600,100,0))}),h.length>0&&Promise.all(h).then(()=>{s.resumeType("typewriter"),n.hasAttribute("data-zm-text-reveal-hover")&&f(n)})},500))}function x(){m=!0,h.forEach(w=>w.cancel())}function b(){m&&(m=!1,p())}n.hasAttribute("data-pause")&&s.register(n,"text-reveal",x,b),p()}function r(n){let u=n.currentTarget,h=u.querySelector("[data-ui-reveal-char]"),m=u.querySelector("[data-ui-reveal-char-alt]");c(h,0,600,0,-100),c(m,0,600,100,0)}function f(n){n.querySelectorAll("[data-ui-reveal-char-wrap]").forEach(h=>{h.addEventListener("mouseenter",r)})}function d(){document.querySelectorAll("[data-zm-text-reveal]").forEach(l)}d(),i.addEventListener("change",d)}function oe(){let i=window.matchMedia("(max-width: 575px)"),s=z(),c=D();function o(){s.clearAll(),document.querySelectorAll("[data-zm-text-typewriter]").forEach(r=>{let f=ue(r.getAttribute("data-zm-text-typewriter")||""),d=0,n=null,u=!1;r.classList.add("zm-typewriter"),r.innerHTML="&nbsp;";function h(){u||(d===0&&(r.classList.add("zm-typewriter--visible"),r.innerHTML=f[0]||"",d=1),d<f.length?(n=setTimeout(()=>{u||(r.textContent+=f[d],d++,h())},60),s.add(n)):r.classList.add("zm-typewriter--blink"))}function m(){u=!0,n!==null&&clearTimeout(n)}function p(){if(u){if(u=!1,d>=f.length){r.classList.add("zm-typewriter--blink");return}h()}}c.register(r,"typewriter",m,p),h()})}o(),i.addEventListener("change",o)}function ce(){let i=document.querySelectorAll("[data-zm-text-scramble]"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZ";i.forEach(c=>{let o=Array.from(c.childNodes).find(r=>r.nodeType===Node.TEXT_NODE);if(!o)return;let l=o.textContent.trim();c.addEventListener("mouseenter",()=>{let r=0,f=setInterval(()=>{o.textContent=l.split("").map((d,n)=>n<r?l[n]:s[Math.floor(Math.random()*26)]).join(""),r>=l.length&&clearInterval(f),r+=1/3},30)})})}function ue(i){var s=document.createElement("textarea");return s.innerHTML=i,s.value}})();
