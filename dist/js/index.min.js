function initAsteroids(){}function pauseController(){if(!pauseController.instance){let r=new WeakMap,i=new Set;pauseController.instance={register:(e,t,a,n)=>{r.has(e)||(r.set(e,{type:t,pause:a,resume:n}),console.log("Registering element:",e,"Type:",t),i.add(e),e.hasAttribute("data-pause")&&a())},pauseAll:()=>{i.forEach(e=>{e=r.get(e);e&&e.pause()})},resumeAll:()=>{i.forEach(e=>{e=r.get(e);e&&e.resume()})},pauseType:(t=null)=>{i.forEach(e=>{e=r.get(e);!e||t&&e.type!==t||e.pause()})},resumeType:(t=null)=>{i.forEach(e=>{e=r.get(e);!e||t&&e.type!==t||e.resume()})},resumeElement:e=>{e=r.get(e);e&&e.resume()}}}return pauseController.instance}function timeoutController(){if(!timeoutController.instance){let t=new Set;timeoutController.instance={add:e=>t.add(e),clearAll:()=>{t.forEach(clearTimeout),t.clear()}}}return timeoutController.instance}function observeElements(e,t,a={root:null,threshold:0}){e=document.querySelectorAll(e);let n=new IntersectionObserver(e=>{requestAnimationFrame(()=>{e.forEach(e=>{e.isIntersecting&&t(e,n)})})},a);return e.forEach(e=>n.observe(e)),n}function decodeHTML(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function initSiteBackground(){let a=269,t=document.querySelector("body"),n=document.querySelector("[data-ui-canvas-bg]"),r=n.getContext("2d"),i=new Image,o=(i.src="/dist/img/grit-white.png",0),l=0,s,c=!1,d=0,u=0,m=-.5,h=0;function e(){var e=window.devicePixelRatio||1;n.width=window.innerWidth*e,n.height=window.innerHeight*e,n.style.width="100vw",n.style.height="100vh",r.scale(e,e),s=.3*window.innerHeight,r.imageSmoothingEnabled=!1}n.addEventListener("mousedown",e=>{c=!0,d=e.clientX,u=e.clientY,m=0,h=0,t.classList.add("page-grabbed")}),n.addEventListener("mousemove",e=>{var t,a;c&&(t=e.clientX-d,a=e.clientY-u,o-=t,l-=a,m=-t,h=-a,d=e.clientX,u=e.clientY)}),n.addEventListener("mouseup",()=>{c=!1,t.classList.remove("page-grabbed")}),n.addEventListener("mouseleave",()=>{c=!1,t.classList.remove("page-grabbed")}),e(),i.onload=function e(){if(i.complete){r.clearRect(0,0,n.width,n.height);for(let t=o-a;t<window.innerWidth+a;t+=a)for(let e=l-s;e<window.innerHeight+s;e+=s)r.drawImage(i,t,e,a,s);c||(o+=m,l+=h,m*=.95,h*=.95,Math.abs(m)<.5&&(m=-.5),Math.abs(h)<.01&&(h=0)),o<=-a&&(o+=a),o>=a&&(o-=a),l<=-s&&(l+=s),l>=s&&(l-=s)}requestAnimationFrame(e)},window.addEventListener("resize",e)}function initMobileMenu(){let e=document.querySelector("body");var t=document.querySelector("[data-ui-navbar-toggle]");let a=document.querySelector("[data-ui-navbar-collapse]");var n=document.querySelector("[data-ui-navbar-close-button]");let r=pauseController();t.addEventListener("click",function(){e.classList.add("mobile-menu-open"),a.classList.add("zm-navbar__collapse--active"),r.resumeType("text-reveal")}),n.addEventListener("click",function(){resetMobileMenu()})}function resetMobileMenu(){var e=document.querySelector("body"),t=document.querySelector("[data-ui-navbar-collapse]");e.classList.remove("mobile-menu-open"),t.classList.remove("zm-navbar__collapse--active")}function initAnchorScroll(){function t(e){e.preventDefault();var e=e.currentTarget.getAttribute("href").substring(1),e=document.getElementById(e);e&&(e=e.getBoundingClientRect().top+window.scrollY,window.scrollTo({top:e-40,behavior:"smooth"}))}document.querySelectorAll("a[href^='#']").forEach(e=>{e.addEventListener("click",t)})}function initWorkCarousels(){let c=document.querySelectorAll("[data-ui-work-box-track]"),d=window.matchMedia("(max-width: 991px)");c.forEach(t=>{let e=t.dataset.trackSpeed?parseFloat(t.dataset.trackSpeed):100,a=0,n=null,r=!1;function i(){r&&((a-=e/5e3)<=-50&&(a=0),t.style.transform=`translate3d(0, ${a}%, 0)`,n=requestAnimationFrame(i))}function o(){r||(r=!0,requestAnimationFrame(i))}function l(){r=!1,n&&(cancelAnimationFrame(n),n=null)}function s(){(d.matches?o:l)()}s(),d.addEventListener("change",s),t.closest(".work-box").addEventListener("mouseenter",()=>{d.matches||(c.forEach(e=>{e!==t&&(e.dataset.animating="false",l.call(e))}),t.dataset.animating="true",o())}),t.closest(".work-box").addEventListener("mouseleave",()=>{d.matches||l()})})}function initTextReveals(){document.querySelectorAll("[data-zm-text-reveal]");let o=window.matchMedia("(max-width: 575px)"),l=pauseController();function s(e,t,a,n,r){return e.animate([{transform:`translateY(${n}%)`},{transform:`translateY(${r}%)`}],{duration:a,easing:"cubic-bezier(.68,-.55,.265,1.55)",fill:"forwards",delay:t}).finished}function e(t){var a=t,n="mobile"===a.getAttribute("data-zm-text-reveal-mode");if(o.matches||!n){console.log("iserting chars",a);let e="";(e=a.hasAttribute("data-zm-text-reveal-mobile")&&o.matches?a.getAttribute("data-zm-text-reveal-mobile"):a.getAttribute("data-zm-text-reveal"))?(n=e.split(""),a.innerText="",n.forEach(e=>{" "===e?a.insertAdjacentHTML("beforeend",'<span class="zm-reveal-char__space">&nbsp;</span>'):a.insertAdjacentHTML("beforeend",`<span class='zm-reveal-char__wrap' data-ui-reveal-char-wrap aria-hidden='true'>
                        <span class='zm-reveal-char zm-reveal-char--primary' data-ui-reveal-char>${e}</span>
                        <span class='zm-reveal-char zm-reveal-char--alt' data-ui-reveal-char-alt>${e}</span>
                      </span>`)})):a.innerText=""}let r=t.querySelectorAll("[data-ui-reveal-char]");if(0!==r.length){let a=[],e=!1;function i(){e||(a=[],r.forEach((e,t)=>{a.push(s(e,70*t,600,100,0))}),0<a.length&&setTimeout(()=>{Promise.all(a).then(()=>{l.resumeType("typewriter"),t.hasAttribute("data-zm-text-reveal-hover")&&t.querySelectorAll("[data-ui-reveal-char-wrap]").forEach(e=>{e.addEventListener("mouseenter",c)})})},400))}t.hasAttribute("data-pause")&&(l.register(t,"text-reveal",function(){e=!0,a.forEach(e=>e.cancel())},function(){e&&(e=!1,i())}),console.log(l)),i()}}function c(e){var e=e.currentTarget,t=e.querySelector("[data-ui-reveal-char]"),e=e.querySelector("[data-ui-reveal-char-alt]");s(t,0,600,0,-100),s(e,0,600,100,0)}function t(){document.querySelectorAll("[data-zm-text-reveal]").forEach(e)}t(),o.addEventListener("change",t)}function initTextTypewriters(){var e=window.matchMedia("(max-width: 575px)");let o=timeoutController(),l=pauseController();function t(){o.clearAll(),document.querySelectorAll("[data-zm-text-typewriter]").forEach(e=>{let t=decodeHTML(e.getAttribute("data-zm-text-typewriter")||""),a=0,n=null,r=!1;function i(){r||(0===a&&(e.classList.add("zm-typewriter--visible"),e.innerHTML=t[0]||"",a=1),a<t.length?(n=setTimeout(()=>{r||(e.textContent+=t[a],a++,i())},60),o.add(n)):e.classList.add("zm-typewriter--blink"))}e.classList.add("zm-typewriter"),e.innerHTML="&nbsp;",l.register(e,"typewriter",function(){r=!0,null!==n&&clearTimeout(n)},function(){r&&(r=!1,a>=t.length?e.classList.add("zm-typewriter--blink"):i())}),i()})}t(),e.addEventListener("change",t)}function initTextScrambles(){var e=document.querySelectorAll("[data-zm-text-scramble]");e.forEach(e=>{let t=Array.from(e.childNodes).find(e=>e.nodeType===Node.TEXT_NODE);if(t){let n=t.textContent.trim();e.addEventListener("mouseenter",()=>{let a=0,e=setInterval(()=>{t.textContent=n.split("").map((e,t)=>t<a?n[t]:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(26*Math.random())]).join(""),a>=n.length&&clearInterval(e),a+=1/3},30)})}})}document.addEventListener("DOMContentLoaded",()=>{initSiteBackground(),initMobileMenu(),initAnchorScroll(),initTextReveals(),initTextTypewriters(),initTextScrambles(),initWorkCarousels(),window.addEventListener("resize",()=>{resetMobileMenu()})});export{initAsteroids};