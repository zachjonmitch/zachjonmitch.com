(()=>{function v(){if(!v.instance){let s=new Set;v.instance={subscribe:o=>s.add(o),unsubscribe:o=>s.delete(o)},window.addEventListener("resize",o=>{s.forEach(i=>i(o))})}return v.instance}function M(){let s=window.devicePixelRatio||1,o=60,i=.7,n=35,a=5,t=360,c=document.querySelector("[data-ui-canvas-game]"),l=c.getContext("2d"),r=v(),e={x:0,y:0,r:n/2,a:90/180*Math.PI,rot:0,thrusting:!1,thrust:{x:0,y:0}};document.addEventListener("keydown",d),document.addEventListener("keyup",f);function d(u){switch(u.key.toLowerCase()){case"a":e.rot=t/180*Math.PI/o;break;case"w":e.thrusting=!0;break;case"d":e.rot=-t/180*Math.PI/o;break}}function f(u){switch(u.key.toLowerCase()){case"a":e.rot=0;break;case"w":e.thrusting=!1;break;case"d":e.rot=0;break}}function h(){l.clearRect(0,0,c.width,c.height),e.thrusting?(e.thrust.x+=a*Math.cos(e.a)/o,e.thrust.y-=a*Math.sin(e.a)/o):(e.thrust.x-=i*e.thrust.x/o,e.thrust.y-=i*e.thrust.y/o),l.strokeStyle="#05F802",l.lineWidth=n/20,l.beginPath(),l.moveTo(e.x+4/3*e.r*Math.cos(e.a),e.y-4/3*e.r*Math.sin(e.a)),l.lineTo(e.x-e.r*(2/3*Math.cos(e.a)+.8*Math.sin(e.a)),e.y+e.r*(2/3*Math.sin(e.a)-.8*Math.cos(e.a))),l.lineTo(e.x-e.r*(1/3*Math.cos(e.a)),e.y+e.r*(1/3*Math.sin(e.a))),l.lineTo(e.x-e.r*(2/3*Math.cos(e.a)-.8*Math.sin(e.a)),e.y+e.r*(2/3*Math.sin(e.a)+.8*Math.cos(e.a))),l.closePath(),l.stroke(),e.a+=e.rot,e.x+=e.thrust.x,e.y+=e.thrust.y;let u=c.width/s,y=c.height/s;e.x<0-e.r?e.x=u+e.r:e.x>u+e.r&&(e.x=0-e.r),e.y<0-e.r?e.y=y+e.r:e.y>y+e.r&&(e.y=0-e.r),l.fillStyle="red",l.fillRect(e.x-1+.15*e.r*Math.cos(e.a),e.y-1-.15*e.r*Math.sin(e.a),2,2),requestAnimationFrame(h)}function m(){l.setTransform(1,0,0,1,0,0),c.width=window.innerWidth*s,c.height=window.innerHeight*s,c.style.width="100vw",c.style.height="100vh",l.scale(s,s),l.imageSmoothingEnabled=!1,e.x=15+e.r,e.y=c.height/s-15-e.r}m(),h(),r.subscribe(m)}function b(){if(!b.instance){let s=new WeakMap,o=new Set;b.instance={register:(i,n,a,t)=>{s.has(i)||(s.set(i,{type:n,pause:a,resume:t}),o.add(i),i.hasAttribute("data-pause")&&a())},pauseAll:()=>{o.forEach(i=>{let n=s.get(i);n&&n.pause()})},resumeAll:()=>{o.forEach(i=>{let n=s.get(i);n&&n.resume()})},pauseType:(i=null)=>{o.forEach(n=>{let a=s.get(n);a&&(!i||a.type===i)&&a.pause()})},resumeType:(i=null)=>{o.forEach(n=>{let a=s.get(n);a&&(!i||a.type===i)&&a.resume()})},resumeElement:i=>{let n=s.get(i);n&&n.resume()}}}return b.instance}function T(){if(!T.instance){let s=new Set;T.instance={add:o=>s.add(o),clearAll:()=>{s.forEach(clearTimeout),s.clear()}}}return T.instance}document.addEventListener("DOMContentLoaded",()=>{L(),k(),M(),I(),P(),z(),R(),F(),H(),q()});function L(){let n=document.querySelector("body"),a=document.querySelector("[data-ui-canvas-bg]"),t=a.getContext("2d"),c=new Image;c.src="/dist/img/grit-white.png";let l=0,r=0,e,d=!1,f=0,h=0,m=-.5,u=0,y=performance.now(),w=v();function g(){let p=window.devicePixelRatio||1;a.width=window.innerWidth*p,a.height=window.innerHeight*p,a.style.width="100vw",a.style.height="100vh",t.scale(p,p),e=window.innerHeight*.3,t.imageSmoothingEnabled=!1}function A(p){if(!c.complete){requestAnimationFrame(A);return}let E=(p-y)/16.67;y=p,t.clearRect(0,0,a.width,a.height);for(let x=l-269;x<window.innerWidth+269;x+=269)for(let S=r-e;S<window.innerHeight+e;S+=e)t.drawImage(c,x,S,269,e);d||(l+=m*E,r+=u*E,m*=.95,u*=.95,Math.abs(m)<.5&&(m=-.5),Math.abs(u)<.01&&(u=0)),l<=-269&&(l+=269),l>=269&&(l-=269),r<=-e&&(r+=e),r>=e&&(r-=e),requestAnimationFrame(A)}a.addEventListener("mousedown",p=>{d=!0,f=p.clientX,h=p.clientY,m=0,u=0,n.classList.add("page-grabbed")}),a.addEventListener("mousemove",p=>{if(d){let E=p.clientX-f,x=p.clientY-h;l-=E,r-=x,m=-E,u=-x,f=p.clientX,h=p.clientY}}),a.addEventListener("mouseup",()=>{d=!1,n.classList.remove("page-grabbed")}),a.addEventListener("mouseleave",()=>{d=!1,n.classList.remove("page-grabbed")}),g(),c.onload=()=>requestAnimationFrame(A),w.subscribe(g)}function k(){let s=document.querySelectorAll("[data-parallax]"),o=window.scrollY,i=!1;function n(){let a=window.scrollY;if(a===o){i=!1,requestAnimationFrame(n);return}o=a,s.forEach(t=>{let c=parseFloat(t.dataset.parallaxSpeedX)||0,l=parseFloat(t.dataset.parallaxSpeedY)||0,r=t.hasAttribute("data-parallax-start-x"),e=t.hasAttribute("data-parallax-stop-x"),d=t.hasAttribute("data-parallax-start-y"),f=t.hasAttribute("data-parallax-stop-y"),h=r?parseFloat(t.dataset.parallaxStartX):0,m=e?parseFloat(t.dataset.parallaxStopX):1/0,u=d?parseFloat(t.dataset.parallaxStartY):0,y=f?parseFloat(t.dataset.parallaxStopY):1/0,w=h+c*a,g=u+l*a;r&&e&&(w=Math.min(Math.max(w,Math.min(h,m)),Math.max(h,m))),d&&f&&(g=Math.min(Math.max(g,Math.min(u,y)),Math.max(u,y))),t.style.transform=`translate3d(${w}px, ${g}px, 0)`}),i=!1,requestAnimationFrame(n)}requestAnimationFrame(n)}function I(){let s=document.querySelectorAll("[data-ui-game-controls-key]"),o=n=>{let a=n.key.toUpperCase();a===" "&&n.preventDefault(),s.forEach(t=>{let c=t.dataset.uiGameControlsKey.toUpperCase();(c===a||c==="SPACE"&&a===" ")&&t.classList.add("game-controls__key--active")})},i=n=>{let a=n.key.toUpperCase();s.forEach(t=>{let c=t.dataset.uiGameControlsKey.toUpperCase();(c===a||c==="SPACE"&&a===" ")&&t.classList.remove("game-controls__key--active")})};document.addEventListener("keydown",o),document.addEventListener("keyup",i)}function P(){let s=document.querySelector("body"),o=document.querySelector("[data-ui-navbar-toggle]"),i=document.querySelector("[data-ui-navbar-collapse]"),n=document.querySelector("[data-ui-navbar-close-button]"),a=document.querySelectorAll("[data-ui-navbar-link]"),t=b();v().subscribe(C),o.addEventListener("click",l),n.addEventListener("click",r),a.forEach(e=>{e.addEventListener("click",C)});function l(){s.classList.add("mobile-menu-open"),i.classList.add("zm-navbar__collapse--active"),t.resumeType("text-reveal")}function r(){C()}}function C(){let s=document.querySelector("body"),o=document.querySelector("[data-ui-navbar-collapse]");s.classList.remove("mobile-menu-open"),o.classList.remove("zm-navbar__collapse--active")}function z(){document.querySelectorAll("a[href^='#']").forEach(i=>{i.addEventListener("click",o)});function o(i){i.preventDefault();let n=i.currentTarget.getAttribute("href").substring(1),a=document.getElementById(n);if(!a)return;let t=40,c=a.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:c-t,behavior:"smooth"})}}function q(){let s=document.querySelectorAll("[data-ui-work-box-track]"),o=window.matchMedia("(max-width: 991px)");function i(){s.forEach(n=>{let a=n.dataset.trackSpeed?parseFloat(n.dataset.trackSpeed):100,t=0,c=performance.now(),l=null,r=!1;function e(u){if(!r)return;let y=u-c;c=u,t-=a/7e3*(y/16.67),t<=-50&&(t=0),n.style.transform=`translate3d(0, ${t}%, 0)`,l=requestAnimationFrame(e)}function d(){r||(r=!0,c=performance.now(),requestAnimationFrame(e))}function f(){r=!1,l&&(cancelAnimationFrame(l),l=null)}function h(){o.matches?d():f()}h(),o.addEventListener("change",h);let m=n.closest(".work-box");m.addEventListener("mouseenter",()=>{o.matches||(s.forEach(u=>{u!==n&&(u.dataset.animating="false",f.call(u))}),n.dataset.animating="true",d())}),m.addEventListener("mouseleave",()=>{o.matches||f()})})}i()}function R(){let s=window.matchMedia("(max-width: 575px)"),o=b();function i(r,e,d,f,h){return r.animate([{transform:`translateY(${f}%)`},{transform:`translateY(${h}%)`}],{duration:d,easing:"cubic-bezier(.68,-.55,.265,1.55)",fill:"forwards",delay:e}).finished}function n(r){let e=r.getAttribute("data-zm-text-reveal-mode")==="mobile";if(!s.matches&&e)return;let d="";if(r.hasAttribute("data-zm-text-reveal-mobile")&&s.matches?d=r.getAttribute("data-zm-text-reveal-mobile"):d=r.getAttribute("data-zm-text-reveal"),!d){r.innerText="";return}let f=d.split("");r.innerText="",f.forEach(h=>{if(h===" ")r.insertAdjacentHTML("beforeend",'<span class="zm-reveal-char__space">&nbsp;</span>');else{let m=`<span class='zm-reveal-char__wrap z-2' data-ui-reveal-char-wrap aria-hidden='true'>
                        <span class='zm-reveal-char zm-reveal-char--primary' data-ui-reveal-char>${h}</span>
                        <span class='zm-reveal-char zm-reveal-char--alt' data-ui-reveal-char-alt>${h}</span>
                      </span>`;r.insertAdjacentHTML("beforeend",m)}})}function a(r){n(r);let e=r.querySelectorAll("[data-ui-reveal-char]");if(e.length===0)return;let d=[],f=!1;function h(){f||(d=[],setTimeout(()=>{e.forEach((y,w)=>{d.push(i(y,w*70,600,100,0))}),d.length>0&&Promise.all(d).then(()=>{o.resumeType("typewriter"),r.hasAttribute("data-zm-text-reveal-hover")&&c(r)})},500))}function m(){f=!0,d.forEach(y=>y.cancel())}function u(){f&&(f=!1,h())}r.hasAttribute("data-pause")&&o.register(r,"text-reveal",m,u),h()}function t(r){let e=r.currentTarget,d=e.querySelector("[data-ui-reveal-char]"),f=e.querySelector("[data-ui-reveal-char-alt]");i(d,0,600,0,-100),i(f,0,600,100,0)}function c(r){r.querySelectorAll("[data-ui-reveal-char-wrap]").forEach(d=>{d.addEventListener("mouseenter",t)})}function l(){document.querySelectorAll("[data-zm-text-reveal]").forEach(a)}l(),s.addEventListener("change",l)}function F(){let s=window.matchMedia("(max-width: 575px)"),o=T(),i=b();function n(){o.clearAll(),document.querySelectorAll("[data-zm-text-typewriter]").forEach(t=>{let c=_(t.getAttribute("data-zm-text-typewriter")||""),l=0,r=null,e=!1;t.classList.add("zm-typewriter"),t.innerHTML="&nbsp;";function d(){e||(l===0&&(t.classList.add("zm-typewriter--visible"),t.innerHTML=c[0]||"",l=1),l<c.length?(r=setTimeout(()=>{e||(t.textContent+=c[l],l++,d())},60),o.add(r)):t.classList.add("zm-typewriter--blink"))}function f(){e=!0,r!==null&&clearTimeout(r)}function h(){if(e){if(e=!1,l>=c.length){t.classList.add("zm-typewriter--blink");return}d()}}i.register(t,"typewriter",f,h),d()})}n(),s.addEventListener("change",n)}function H(){let s=document.querySelectorAll("[data-zm-text-scramble]"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZ";s.forEach(i=>{let n=Array.from(i.childNodes).find(t=>t.nodeType===Node.TEXT_NODE);if(!n)return;let a=n.textContent.trim();i.addEventListener("mouseenter",()=>{let t=0,c=setInterval(()=>{n.textContent=a.split("").map((l,r)=>r<t?a[r]:o[Math.floor(Math.random()*26)]).join(""),t>=a.length&&clearInterval(c),t+=1/3},30)})})}function _(s){var o=document.createElement("textarea");return o.innerHTML=s,o.value}})();
